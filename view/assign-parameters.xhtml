<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" xmlns:s="http://jboss.com/products/seam/taglib" contentType="text/html" template="layout/template.xhtml">

	<ui:define name="content">
		<h:form id="assignParameters" styleClass="edit">

        <rich:panel>
            <f:facet name="header">Assign Parameters</f:facet>

				<s:decorate id="ajaxStatusField" template="layout/edit.xhtml">
					<ui:define name="label">Ajax Status</ui:define>
					<a:status id="ajaxStatus"  startText="In progress..." stopText="Complete"/>
				</s:decorate>


				<s:decorate id="expenseCategoryField" template="layout/edit.xhtml">
					<ui:define name="label">Expense Category</ui:define>
					<h:selectOneMenu id="category" value="#{expenseCategoryHome.instance}" >
						<s:selectItems value="#{expenseCategoryList.resultList}" var="c" itemValue="#{c}" label="#{c.name}" noSelectionLabel="All Categories" />
						<s:convertEntity />
						<a:support event="onchange" reRender="expenseTypeField, typeParametersField" ajaxSingle="true" />
					</h:selectOneMenu>
				</s:decorate>
				
				<s:decorate id="expenseTypeField" template="layout/edit.xhtml">
					<ui:define name="label">Expense Type</ui:define>
					<h:selectOneMenu id="type" required="true" value="#{expenseTypeHome.instance}">
						<s:selectItems value="#{expenseTypeList.loadTypesByCategory()}" var="t" itemValue="#{t}" label="#{t.name}" />
						<s:convertEntity />
						<a:support event="onchange" reRender="typeParametersField" ajaxSingle="true" />
					</h:selectOneMenu>
				</s:decorate>
				
				<s:decorate id="typeParametersField" template="layout/edit.xhtml">
					<ui:define name="label">Parameters</ui:define>
					<rich:pickList value="#{expenseTypeHome.instance.typeParameters}">
						<s:selectItems value="#{typeParameterList.resultList}" var="p" label="#{p.name}"/>
						<s:convertEntity />
					</rich:pickList>
				</s:decorate>
				

            <div style="clear:both">
                <span class="required">*</span>
                required fields
            </div>

        </rich:panel>

        <div class="actionButtons">

            <h:commandButton id="save"
                          value="Save"
                         action="#{expenseTypeHome.update}" />

            

            <s:button id="cancel"
                   value="Cancel"
             propagation="end"
                    view="/expense-type-list.xhtml"
                rendered="#{expenseTypeHome.managed}"/>

        </div>
    </h:form>
	</ui:define>
</ui:composition>
